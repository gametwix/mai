# Отчет по курсовому проекту
## по курсу "Логическое программирование"

### студент: Мохляков П.А.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В.     |              |               |
| Левинская М.А.    |              |               |


## Введение

Опишите, какие знания и навыки вы получите в результате выполнения курсового проекта

## Задание

 1. Создать родословное дерево своего рода на несколько поколений (3-4) назад в стандартном формате GEDCOM с использованием сервиса MyHeritage.com 
 2. Преобразовать файл в формате GEDCOM в набор утверждений на языке Prolog, используя следующее представление: ...
 3. Реализовать предикат проверки/поиска .... 
 4. Реализовать программу на языке Prolog, которая позволит определять степень родства двух произвольных индивидуумов в дереве
 5. [На оценки хорошо и отлично] Реализовать естественно-языковый интерфейс к системе, позволяющий задавать вопросы относительно степеней родства, и получать осмысленные ответы. 

## Получение родословного дерева

Я создал дерево родословных семей из сериала "Игра пристолов". Для создания дерева я использовал сервис MyHeritage.com , а для поиска родословных семей я использовал поисковую систему google.com. В моем дереве 40 человек.

## Конвертация родословного дерева

Для конвертации формата gedcom в набор фактов языка пролог я написал скрипт на языке Python. Я выбрал этот язык из-за того, что в нем удобно работать со строками и регулярными выражениями. Рассмотрим основные прицыпы алгорима этого скрипта:

1. Для начала я создаю три списка для имен, пола и id людей, и заполняю их. Расмотрим заполнение на примере имен, остальные работают аналогично

        def find_names(lines):
        #список имен
        names = []
        #рассматриваем каждую строку файла
        for line in lines:
            #если строка подходит под регулярное выражение
            if re.search(r"NAME\s(.+)\s/(.*)/", line) is not None :
                #то записывем объект регулярного выражения
                name = re.search(r"NAME\s(.+)\s/(.*)/", line)
                #если существует фамилия, то записываем имя и фамилию
                if name[2] != '':
                    #print(name[2])
                    name = name[1]+ ' ' + name[2]
                #иначе только имя    
                else :
                    name = name[1]
                #добавляем в список заменяя недопустимые символы
                names.append(name.replace(" ","_").replace(",","").replace(";","").replace(".","").lower())
                #print(name)
        return names
2. Создаю словари на основе полов, имен и id людей

        names = dict(zip(ids,names))
        sexs = dict(zip(ids,sexs))
3. Создаю семьи

        def find_fams(lines):
            itfam = 0
            fams = []
            infam = False
            for line in lines:
                #Если мы всречаем мужа или жену
                if (re.search(r"HUSB\s\WI(\d+)\W",line) is not None) or (re.search(r"WIFE\s\WI(\d+)\W",line) is not None):
                    parent = 0
                    #то записываем их id
                    if re.search(r"HUSB\s\WI(\d+)\W",line) is not None:
                        parent = re.search(r"HUSB\s\WI(\d+)\W",line)
                        parent = int(parent[1])

                    if re.search(r"WIFE\s\WI(\d+)\W",line) is not None:
                        parent = re.search(r"WIFE\s\WI(\d+)\W",line)
                        parent = int(parent[1])

                    #если это первый член семьи
                    if not infam:
                        #увеличиваем колличество семей
                        itfam = itfam + 1
                        #добавляем родителя в список родителей
                        fams.append([[parent],[]])
                        infam = True
                    elif infam:
                        #добавляем родителя в список родителей
                        fams[itfam-1][0].append(parent)
                
                #мы достигли конца семьи
                if re.search(r"RIN\sMH\WF",line) is not None:
                    infam = False

                #если встретили ребенка добавляем в список детей
                if re.search(r"CHIL\s\WI(\d+)\W",line) is not None:
                    child = re.search(r"CHIL\s\WI(\d+)\W",line)
                    child = int(child[1])
                    fams[itfam-1][1].append(child) 

            return fams

4. Сопоставляю каждому родителю его детей, и формирую список для вывода, замуняя id в соответствии со словарем.            


## Предикат поиска родственника

Опишите, как устроен предикат поиска родственника, приведите его исходный код и примеры запросов/ответов (протокол работы).

## Определение степени родства

Приведите описание метода решения, важные фрагменты исходного кода, протокол работы.

## Естественно-языковый интерфейс

## Выводы

Сформулируйте *содержательные* выводы по курсовому проекту в целом. Чему он вас научила? 
Над чем заставила задуматься? Помните, что несодержательные выводы -
самая частая причина снижения оценки.